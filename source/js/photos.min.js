(()=>{const s={initPhotos(){const s=$(".photos-gallery");let i=!1,n=!1;const c={page:0,size:15,sort:"createTime,desc"};let l;const e=t=>{i=!0,s.addClass("loading");const e={...c,...t||{}};let o;(l=new Promise((a,s)=>{o=s,Utils.request({url:"/api/content/photos",method:"GET",data:e}).then(t=>a(t)).catch(t=>s(t))}).then(t=>{var a=t.content||[];n=0===a.length||(a=a.reduce((t,a,s)=>`${t}<div href="${a.url}" data-fancybox="gallery" data-caption="${a.description||a.name||""}"><img width="100%" height="100%" src="${a.thumbnail}" alt="${a.name||""}"/><p class="gallery-title">${a.name}</p><div class="info"><p><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M834.9 913.6H189.7c-69.2 0-125.5-56.3-125.5-125.5V381.5c0-69.2 56.3-125.5 125.5-125.5h14.7c14.4 0 27.3-8.6 32.9-21.8l19.2-45.1c19.7-46.3 65-76.3 115.4-76.3h280.6c50.4 0 95.7 30 115.4 76.3l19.2 45c5.7 13.2 18.6 21.8 33 21.8h14.7c69.2 0 125.5 56.3 125.5 125.5V788c0.1 69.3-56.2 125.6-125.4 125.6z m-645.2-568c-19.8 0-35.8 16.1-35.8 35.8V788c0 19.8 16.1 35.8 35.8 35.8h645.2c19.8 0 35.8-16.1 35.8-35.8V381.5c0-19.8-16.1-35.8-35.8-35.8h-14.7c-50.4 0-95.7-30-115.4-76.3l-19.2-45c-5.6-13.2-18.6-21.8-33-21.8H372c-14.4 0-27.3 8.6-33 21.8l-19.2 45c-19.7 46.3-65 76.3-115.4 76.3h-14.7z"></path><path d="M512.3 742.8c-97.4 0-176.6-79.2-176.6-176.6s79.2-176.6 176.6-176.6 176.6 79.2 176.6 176.6-79.2 176.6-176.6 176.6z m0-263.6c-48 0-87 39-87 87s39 87 87 87 87-39 87-87-39-87-87-87z"></path></svg><span>${a.name}</span></p>${a.location?`<p><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M511.3 960.8c-9.3 0-18.6-2.9-26.5-8.7-14.1-10.4-345.6-256.4-345.6-516.1 0-205.2 166.9-372.1 372.1-372.1S883.4 230.8 883.4 436c0 259.7-331.5 505.8-345.6 516.1-7.8 5.8-17.2 8.7-26.5 8.7z m0-807.2c-155.7 0-282.4 126.7-282.4 282.4 0 176.5 207.5 361.8 282.4 422.9 74.9-61.1 282.4-246.4 282.4-422.9 0-155.8-126.7-282.4-282.4-282.4z"></path><path d="M511.3 611.7c-96.9 0-175.7-78.8-175.7-175.7s78.8-175.7 175.7-175.7S687.1 339.1 687.1 436s-78.9 175.7-175.8 175.7z m0-261.8c-47.5 0-86.1 38.6-86.1 86.1s38.6 86.1 86.1 86.1 86.1-38.6 86.1-86.1-38.6-86.1-86.1-86.1z"></path></svg><span>${a.location}</span></p>`:""}<p><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M512.7 959.8c-247 0-448-201-448-448s201-448 448-448 448 201 448 448-200.9 448-448 448z m0-806.4c-197.6 0-358.4 160.8-358.4 358.4s160.8 358.4 358.4 358.4 358.4-160.8 358.4-358.4-160.7-358.4-358.4-358.4z"></path><path d="M700 576.8H512.7c-24.6 0-44.6-19.9-44.8-44.5L466 254.5c-0.2-24.7 19.8-44.9 44.5-45.1h0.3c24.6 0 44.6 19.9 44.8 44.5l1.6 233.3H700c24.7 0 44.8 20.1 44.8 44.8 0 24.7-20.1 44.8-44.8 44.8z"></path></svg><span>${Utils.formatDate(a.takeTime)}</span></p>${a.description?`<p>${a.description}</p>`:""}</div></div>`,""),s.append(a),s.justifiedGallery({rowHeight:200,maxRowHeight:!1,maxRowsCount:0,sizeRangeSuffixes:{},lastRow:"nojustify",captions:!1,waitThumbnailsLoad:!0,margins:10,extension:/\.(jpe?g|png|gif|bmp|webp)$/,cssAnimation:!1}),t.isLast)}).catch(t=>console.log(t)).finally(()=>{console.log("finally"),s.removeClass("loading"),l=void 0,i=!1})).abort=o};e(),window.addEventListener("scroll",function(){$(window).scrollTop()+$(window).height()>=s.height()&&(i||n||(c.page++,e({team:$(".photos-teams li.active").attr("data-team"),size:10})))}),$(".photos-teams .item").on("click",function(t){t.stopPropagation();const a=$(this);a.hasClass("active")||(a.addClass("active").siblings("li").removeClass("active"),(async t=>{l&&(l.abort&&l.abort("abort"),await l),s.empty(),n=!1,i=!1,c.page=0,e(t)})({team:a.attr("data-team")}))})}};window.photoPjax=function(a){0!==$(".photos-gallery").length&&Object.keys(s).forEach(t=>window.pjaxSerialNumber===a&&s[t]())},window.pjaxSerialNumber||s.initPhotos()})();