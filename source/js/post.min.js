(()=>{const t={initCodeBlock(){const i=$("*:not(figure) > pre > code");0!==i.length&&(i.each(function(i){const n=$(this).parent();let t=$(this).attr("class"),e="",a=!1;if(null!=t){let i=t.indexOf("|"),n=t.indexOf("<");e=-1!==i||-1!==n?((-1===i||-1!==n&&n<i)&&(a=!0,i=n),$(this).attr("class",t.substring(0,i)),i===t.length-1?t.substring(9,i):t.substring(i+1)):t.substring(9)}let o=$(this).text().split("\n").length-1||1,l=String(o).length,s=(1===l&&(l=2),"");for(var d=0;d<o;d++)s+=`<li>${String(d+1).padStart(l,0)}</li>`;let r="codeBlock"+i,c="";a&&(c=" close",$(this).hide());i=`<div><i class="fa fa-angle-down${c}" data-code='#${r}'></i><i class="fa fa-clone btn-clipboard" title="复制代码" data-clipboard-target='#${r}'></i></div>`;$(this).attr("id",r),n.prepend(`<ul>${s}</ul>`),o>DreamConfig.code_fold_line?n.wrap('<figure class="fold hljs"></figure>').append('<div class="expand-done"><i class="fa fa-angle-double-up"></i></div>'):n.wrap('<figure class="hljs"></figure>'),n.parent().prepend(`<figcaption>${e}${i}</figcaption>`)}),$(".main-content").on("click","figure>figcaption .fa-angle-down",function(){$(this).is(".close")?($($(this).attr("data-code")).parent().slideDown(200),$(this).removeClass("close")):($($(this).attr("data-code")).parent().slideUp(200),$(this).addClass("close"))}),$(".main-content .expand-done").on("click",function(){Utils.foldBlock($(this).parent().parent())}))},initLike(){$(".admire .agree.like").each(function(){Utils.like($(this),$(this).find("span").find("span"),"posts")})},initHighlighting(){hljs.initHighlightingOnLoad()},initClipboard(){window.clipboard||(window.clipboard=new ClipboardJS(".btn-clipboard"),clipboard.on("error",function(i){i.clearSelection(),Qmsg.error("您的浏览器不支持复制")}),clipboard.on("success",function(){Qmsg.success("复制成功")}))}};window.postPjax=function(n){0!==$(".main-content").length&&Object.keys(t).forEach(i=>window.pjaxSerialNumber===n&&t[i]())},window.pjaxSerialNumber||t.initLike(),window.pjaxSerialNumber||t.initCodeBlock(),document.addEventListener("DOMContentLoaded",function(){window.pjaxSerialNumber||t.initHighlighting(),window.pjaxSerialNumber||t.initClipboard()})})();